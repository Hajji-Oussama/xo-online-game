<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>๐ฎ XO ุงููุญุชุฑู - ูุนุจุฉ ุฅูุณ ุฃู ุฃูููุงูู</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>โ</text></svg>">
</head>
<body>
    <!-- ๐ ุดุงุดุฉ ุงูุชุญููู -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner large"></div>
            <h2>๐ฎ XO ุงููุญุชุฑู</h2>
            <p>ุฌุงุฑู ุชุญููู ุงููุนุจุฉ...</p>
            <div class="loading-details">
                <div class="loading-step">โ๏ธ ุชููุฆุฉ ุงูุฃูุธูุฉ</div>
                <div class="loading-step">๐ ุงูุงุชุตุงู ุจุงูุฎุงุฏู</div>
                <div class="loading-step">๐ฏ ุชุญููู ุงููุงุฌูุฉ</div>
            </div>
        </div>
    </div>

    <!-- ๐ฏ ุงูุญุงููุฉ ุงูุฑุฆูุณูุฉ -->
    <div class="container" style="display: none;">
        <!-- ๐ ุญุงูุฉ ุงูุงุชุตุงู -->
        <div class="connection-status-bar">
            <div id="connection-status" class="status-connected">
                <span class="status-dot"></span>
                <span class="status-text">ูุชุตู</span>
            </div>
            <div class="server-stats">
                <span id="online-count" class="stat">๐ฅ 0</span>
                <span id="rooms-count" class="stat">๐ช 0</span>
                <span id="games-count" class="stat">๐ฏ 0</span>
            </div>
        </div>

        <!-- ๐ ุดุงุดุฉ ุงูุฏุฎูู -->
        <div id="login-screen" class="screen active">
            <div class="login-container">
                <div class="login-header">
                    <h1>๐ฎ XO ุงููุญุชุฑู</h1>
                    <p>ูุนุจุฉ ุฅูุณ ุฃู ุฃูููุงูู ูุชุนุฏุฏุฉ ุงููุงุนุจูู</p>
                </div>
                
                <div class="login-form">
                    <div class="input-group">
                        <label for="player-name-input">ุงุณู ุงููุงุนุจ:</label>
                        <input 
                            type="text" 
                            id="player-name-input" 
                            placeholder="ุงุฏุฎู ุงุณูู (2-20 ุญุฑู)"
                            maxlength="20"
                            autocomplete="off"
                        >
                        <div class="input-hint">ูููู ุงุณุชุฎุฏุงู ุงูุฃุญุฑู ุงูุนุฑุจูุฉุ ุงูุฅูุฌููุฒูุฉุ ูุงูุฃุฑูุงู</div>
                    </div>
                    
                    <button id="join-button" class="btn btn-primary btn-large">
                        <span class="btn-icon">๐</span>
                        ุงูุฏุฎูู ุฅูู ุงูุฑุฏูุฉ
                    </button>
                </div>

                <div class="quick-stats">
                    <div class="stat-card">
                        <div class="stat-icon">๐ฅ</div>
                        <div class="stat-info">
                            <div class="stat-value" id="quick-online">0</div>
                            <div class="stat-label">ูุงุนุจ ูุชุตู</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">๐ฎ</div>
                        <div class="stat-info">
                            <div class="stat-value" id="quick-games">0</div>
                            <div class="stat-label">ูุนุจุฉ ูุดุทุฉ</div>
                        </div>
                    </div>
                </div>

                <div class="features-list">
                    <h3>โจ ุงููููุฒุงุช:</h3>
                    <ul>
                        <li>โ ูุงุนุจูู ุฃูููุงูู ููุฑู</li>
                        <li>โ ูุธุงู ุฏุนูุงุช ูุชูุฏู</li>
                        <li>โ ููุญุฉ ูุชุตุฏุฑูู</li>
                        <li>โ ุฅุดุนุงุฑุงุช ูุฃุตูุงุช</li>
                        <li>โ ุชุตููู ุนุฑุจู ูุชูุงูู</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ๐ฅ ุดุงุดุฉ ุงูุฑุฏูุฉ -->
        <div id="lobby-screen" class="screen">
            <div class="lobby-container">
                <div class="lobby-header">
                    <div class="player-info">
                        <span>ูุฑุญุจุงูุ </span>
                        <span id="my-name-display" class="player-name">ูุงุนุจ</span>
                    </div>
                    <div class="lobby-actions">
                        <button id="how-to-play-btn" class="btn btn-secondary">
                            <span class="btn-icon">โ</span>
                            ููููุฉ ุงููุนุจ
                        </button>
                        <button id="refresh-lobby" class="btn btn-secondary">
                            <span class="btn-icon">๐</span>
                            ุชุญุฏูุซ
                        </button>
                    </div>
                </div>

                <div class="lobby-content">
                    <div class="players-section">
                        <div class="section-header">
                            <h3>๐ฅ ุงููุงุนุจูู ุงููุชุตููู</h3>
                            <span class="players-count">
                                <span id="players-count">0</span> ูุงุนุจ
                            </span>
                        </div>
                        
                        <div id="lobby-list" class="players-list">
                            <!-- ุณูุชู ููุคูุง ุจุงููุงุนุจูู -->
                            <div class="empty-state">
                                <div class="empty-icon">๐</div>
                                <p>ูุง ููุฌุฏ ูุงุนุจูู ุขุฎุฑูู ูุชุตููู</p>
                                <small>ุงูุชุญ ูุงูุฐุฉ ุฃุฎุฑู ุฃู ุฏุน ุตุฏููุงู ููุงูุถูุงู!</small>
                            </div>
                        </div>
                    </div>

                    <div class="lobby-sidebar">
                        <div class="quick-actions">
                            <h4>๐ฏ ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ</h4>
                            <button class="btn btn-primary btn-block" onclick="gameClient.findQuickMatch()">
                                <span class="btn-icon">โก</span>
                                ูุนุจุฉ ุณุฑูุนุฉ
                            </button>
                            <button class="btn btn-secondary btn-block" onclick="gameClient.createPrivateRoom()">
                                <span class="btn-icon">๐</span>
                                ุบุฑูุฉ ุฎุงุตุฉ
                            </button>
                        </div>

                        <div class="server-info">
                            <h4>๐ ุฅุญุตุงุฆูุงุช ุงูุณูุฑูุฑ</h4>
                            <div class="info-item">
                                <span>ููุช ุงูุชุดุบูู:</span>
                                <span id="server-uptime">00:00:00</span>
                            </div>
                            <div class="info-item">
                                <span>ุงูุฐุงูุฑุฉ:</span>
                                <span id="server-memory">0MB</span>
                            </div>
                            <div class="info-item">
                                <span>ุงูุงุชุตุงูุงุช:</span>
                                <span id="server-connections">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ๐ฎ ุดุงุดุฉ ุงููุนุจุฉ -->
        <div id="game-screen" class="screen">
            <div class="game-container">
                <!-- ๐ฏ ุฑุฃุณ ุงููุนุจุฉ -->
                <div class="game-header">
                    <div class="room-info">
                        <span id="room-id-display" class="room-id">ุงูุบุฑูุฉ: XXXXXXXX</span>
                        <span id="moves-count" class="moves-count">0 ุญุฑูุงุช</span>
                    </div>
                    <div class="game-controls">
                        <button id="leave-room-button" class="btn btn-danger btn-small">
                            <span class="btn-icon">๐ช</span>
                            ูุบุงุฏุฑุฉ
                        </button>
                    </div>
                </div>

                <!-- ๐ฅ ูุนูููุงุช ุงููุงุนุจูู -->
                <div class="players-info">
                    <div id="player-x-display" class="player-info-card">
                        <div class="player-badge x-badge">
                            <span class="player-symbol">X</span>
                        </div>
                        <div class="player-details">
                            <div class="player-name" id="player-x-name">...</div>
                            <div class="player-status">ูู ุงูุชุธุงุฑ...</div>
                        </div>
                    </div>

                    <div class="vs-separator">
                        <span>VS</span>
                    </div>

                    <div id="player-o-display" class="player-info-card">
                        <div class="player-badge o-badge">
                            <span class="player-symbol">O</span>
                        </div>
                        <div class="player-details">
                            <div class="player-name" id="player-o-name">...</div>
                            <div class="player-status">ูู ุงูุชุธุงุฑ...</div>
                        </div>
                    </div>
                </div>

                <!-- ๐ ุฅุญุตุงุฆูุงุช ุงููุนุจุฉ -->
                <div class="game-stats">
                    <div class="stat-item">
                        <div class="stat-icon">โฑ๏ธ</div>
                        <div class="stat-info">
                            <div class="stat-value" id="timer">00:00</div>
                            <div class="stat-label">ุงูููุช</div>
                        </div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">๐ฏ</div>
                        <div class="stat-info">
                            <div class="stat-value" id="moves">0</div>
                            <div class="stat-label">ุงูุญุฑูุงุช</div>
                        </div>
                    </div>
                </div>

                <!-- ๐ข ุฑุณุงูุฉ ุงูุญุงูุฉ -->
                <div id="status-message" class="status-message">
                    <span class="message-icon">๐ฎ</span>
                    <span class="message-text">ุฌุงุฑู ุฅุนุฏุงุฏ ุงููุนุจุฉ...</span>
                </div>

                <!-- ๐ฒ ููุญุฉ ุงููุนุจุฉ -->
                <div class="game-board-container">
                    <div id="game-board" class="board">
                        <!-- ุณูุชู ุฅูุดุงุก 9 ุฎูุงูุง ุจุงูุฌุงูุงุณูุฑูุจุช -->
                    </div>
                </div>

                <!-- ๐๏ธ ุฃุฒุฑุงุฑ ุงูุชุญูู -->
                <div class="game-actions">
                    <button id="restart-button" class="btn btn-secondary" disabled>
                        <span class="btn-icon">๐</span>
                        ุฅุนุงุฏุฉ ุงููุนุจุฉ
                    </button>
                    <button id="ready-button" class="btn btn-primary" style="display: none;">
                        <span class="btn-icon">โ</span>
                        ุฌุงูุฒ ููุฌููุฉ ุงูุชุงููุฉ
                    </button>
                </div>
            </div>
        </div>

        <!-- ๐ ุงูุชุจููุจุงุช ุงูุฑุฆูุณูุฉ -->
        <nav class="main-nav">
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="play">
                    <span class="tab-icon">๐ฎ</span>
                    <span class="tab-text">ุงููุนุจ</span>
                </button>
                <button class="nav-tab" data-tab="leaderboard">
                    <span class="tab-icon">๐</span>
                    <span class="tab-text">ุงููุชุตุฏุฑูู</span>
                </button>
                <button class="nav-tab" data-tab="how-to-play">
                    <span class="tab-icon">โ</span>
                    <span class="tab-text">ููููุฉ ุงููุนุจ</span>
                </button>
            </div>
        </nav>

        <!-- ๐ ูุญุชููุงุช ุงูุชุจููุจุงุช -->
        <div class="tab-contents">
            <!-- ๐ฎ ุชุจููุจ ุงููุนุจ (ุงูุชุฑุงุถู) -->
            <div id="play-tab" class="tab-content active">
                <!-- ูุญุชูู ุดุงุดุงุช ุงููุนุจ ูุธูุฑ ููุง -->
            </div>

            <!-- ๐ ุชุจููุจ ุงููุชุตุฏุฑูู -->
            <div id="leaderboard-tab" class="tab-content">
                <div class="leaderboard-container">
                    <div class="leaderboard-header">
                        <h2>๐ ููุญุฉ ุงููุชุตุฏุฑูู</h2>
                        <button id="refresh-leaderboard" class="btn btn-secondary btn-small">
                            <span class="btn-icon">๐</span>
                            ุชุญุฏูุซ
                        </button>
                    </div>
                    
                    <div id="leaderboard-list" class="leaderboard-list">
                        <!-- ุณูุชู ููุคูุง ุจุงููุชุณุงุจููู -->
                        <div class="empty-state">
                            <div class="empty-icon">๐</div>
                            <p>ูุง ุชูุฌุฏ ุจูุงูุงุช ูููุชุตุฏุฑูู ุจุนุฏ</p>
                            <small>ุงูุนุจ ุจุนุถ ุงููุจุงุฑูุงุช ูุชุธูุฑ ูู ุงูุชุตููู!</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- โ ุชุจููุจ ููููุฉ ุงููุนุจ -->
            <div id="how-to-play-tab" class="tab-content">
                <div class="how-to-play-container">
                    <h2>โ ููููุฉ ุงููุนุจ</h2>
                    
                    <div class="instructions">
                        <div class="instruction-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h3>ุงูุฏุฎูู ุฅูู ุงููุนุจุฉ</h3>
                                <p>ุงุฏุฎู ุงุณูู ูุงุถุบุท ุนูู "ุงูุฏุฎูู ุฅูู ุงูุฑุฏูุฉ"</p>
                            </div>
                        </div>

                        <div class="instruction-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h3>ุฅุฑุณุงู ุฏุนูุฉ</h3>
                                <p>ุงุฎุชุฑ ูุงุนุจุงู ูู ุงููุงุฆูุฉ ูุงุถุบุท ุนูู "ุฏุนูุฉ" ููุนุจ ูุนู</p>
                            </div>
                        </div>

                        <div class="instruction-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h3>ุจุฏุก ุงููุนุจุฉ</h3>
                                <p>ุนูุฏ ูุจูู ุงูุฏุนูุฉุ ุชุจุฏุฃ ุงููุนุจุฉ ุชููุงุฆูุงู</p>
                            </div>
                        </div>

                        <div class="instruction-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h3>ููุงุนุฏ ุงููุนุจุฉ</h3>
                                <ul>
                                    <li>ุงููุงุนุจ X ูุจุฏุฃ ุฏุงุฆูุงู</li>
                                    <li>ุงููุฏู ูู ุชูููู ุฎุท ูู 3 ุฑููุฒ ูุชุดุงุจูุฉ</li>
                                    <li>ูููู ุฃู ูููู ุงูุฎุท ุฃูููุงูุ ุนููุฏูุงูุ ุฃู ูุทุฑูุงู</li>
                                    <li>ุฅุฐุง ุงูุชูุฆ ุงูููุญ ุจุฏูู ูุงุฆุฒุ ุชููู ุงููุชูุฌุฉ ุชุนุงุฏู</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="game-tips">
                        <h3>๐ก ูุตุงุฆุญ ููููุฒ</h3>
                        <div class="tips-grid">
                            <div class="tip-card">
                                <div class="tip-icon">๐ฏ</div>
                                <p>ุญุงูู ุงูุณูุทุฑุฉ ุนูู ูุฑูุฒ ุงูููุญ</p>
                            </div>
                            <div class="tip-card">
                                <div class="tip-icon">๐</div>
                                <p>ุงูุชุจู ูุญุฑูุงุช ุงูุฎุตู ูุฎุทุท ูุณุจูุงู</p>
                            </div>
                            <div class="tip-card">
                                <div class="tip-icon">โก</div>
                                <p>ุงุณุชุบู ุงููุฑุต ูุฅูุดุงุก ุชูุฏูุฏุงุช ูุฒุฏูุฌุฉ</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ๐ง ูุงูุฐุฉ ุงูุฏุนูุฉ -->
    <div id="invite-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>๐จ ุฏุนูุฉ ููุนุจ</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p id="invite-message">ูุฏูู ุฏุนูุฉ ููุนุจ ูู</p>
                <div class="inviter-info">
                    <span class="inviter-avatar">๐ค</span>
                    <span id="inviter-name" class="inviter-name">ูุงุนุจ</span>
                </div>
            </div>
            <div class="modal-actions">
                <button id="decline-invite" class="btn btn-secondary">
                    <span class="btn-icon">โ</span>
                    ุฑูุถ
                </button>
                <button id="accept-invite" class="btn btn-primary">
                    <span class="btn-icon">โ</span>
                    ูุจูู
                </button>
            </div>
        </div>
    </div>

    <!-- ๐ฌ ุงูุฅุดุนุงุฑุงุช -->
    <div id="notification-container" class="notification-container"></div>

    <!-- ๐ต ุงูุนูุงุตุฑ ุงูุตูุชูุฉ -->
    <audio id="move-sound" preload="auto">
        <source src="assets/move-sound.mp3" type="audio/mpeg">
    </audio>
    <audio id="win-sound" preload="auto">
        <source src="assets/win-sound.mp3" type="audio/mpeg">
    </audio>
    <audio id="draw-sound" preload="auto">
        <source src="assets/draw-sound.mp3" type="audio/mpeg">
    </audio>
    <audio id="notification-sound" preload="auto">
        <source src="assets/notification-sound.mp3" type="audio/mpeg">
    </audio>

    <!-- ๐ ุงูููุชุจุงุช -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="client.js"></script>

    <!-- ๐๏ธ Script ุฅุถุงูู -->
    <script>
        // ุชููุฆุฉ ุงูุฃุตูุงุช ุงูุงูุชุฑุงุถูุฉ ุฅุฐุง ูู ุชูู ุงููููุงุช ููุฌูุฏุฉ
        window.addEventListener('load', function() {
            const sounds = ['move-sound', 'win-sound', 'draw-sound', 'notification-sound'];
            sounds.forEach(soundId => {
                const sound = document.getElementById(soundId);
                if (sound) {
                    sound.addEventListener('error', function() {
                        console.log(`๐ ุงูุตูุช ${soundId} ุบูุฑ ูุชููุฑุ ุณูุชู ุงุณุชุฎุฏุงู ุจุฏูู`);
                    });
                }
            });
        });

        // ููุน ุณููู ุงููููุฐุฌ ุงูุงูุชุฑุงุถู
        document.addEventListener('submit', function(e) {
            e.preventDefault();
        });

        // ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุชุจููุจุงุช
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('nav-tab')) {
                const tabName = e.target.dataset.tab;
                if (window.gameClient) {
                    window.gameClient.switchTab(tabName);
                }
            }
        });
    </script>
</body>
</html>